\documentclass[../../thesis.tex]{subfiles}

\begin{document}
\section{A little history}
The origins of sheaf theory is quite a remarkable story, and we quote Armand Borel \cite{Borel}:
\begin{quotation}
    ``The Second World War broke out in 1939 and J. Leray [then Professor at the Sorbonne and an officer in the French army] was made prisoner by the Germans in 1940.
    He spent the next five years in captivity in an officers’ camp, Oflag XVIIA in Austria [not far from Salzburg].
    With the help of some colleagues, he founded a university there, of which he became the Director (“recteur”).
    His major mathematical interests had been so far in analysis, on a variety of problems which, though theoretical, had their origins in, and potential applications to, technical problems in mechanics or fluid dynamics.
    Algebraic topology had been only a minor interest, geared to applications to analysis. Leray feared that if his competence as a “mechanic” (“mécanicien,” his word) were known to the German authorities in the camp, he might be compelled to work for the German war machine, so he converted his minor interest to his major one, in fact to his essentially unique one, presented himself as a pure mathematician, and devoted himself mainly to algebraic topology.''
\end{quotation}
The result of this short and involuntary detour into the field of algebraic topology was as Haynes Miller \cite{H.Miller} puts it ``a spectacular flowering of highly original ideas, ideas which have, through the usual metamorphism of history, shaped the course of mathematics in the sixty years since then.''
While used to using topological invariants to prove the existence of solutions of certain partial differential equations, he motivated his study of algebraic topology in captivity by seeking methods that applied to a wide class of topological spaces, all in the hope of proving more directly the same kind of theorems he had proved before the war in an indirect manner.
In 1942 he announced the first part of his work, and it was approved by Heinz Hopf and published in 1945 with the subtitle ``Un cours de topologie algébrique professé en captivité'' -- ``A course in algebraic topology taught in captivity''.
As with many new discoveries, it took some time before his work was fully appreciated.
Part of the reason was that his 1945 papers \cite{Leray45a2},\cite{Leray45b2} and \cite{Leray45c2} according to Armand Borel \cite{BorelAMS} ``did not seem to go drastically beyond those of mainstream algebraic topology (even though a closer examination would have revealed a novel approach and more general assumptions for a number of familiar results), so \cite{Leray45a2},\cite{Leray45b2} and \cite{Leray45c2} did not create such a big impression.''


But Leray was not done.
As Gray writes in \cite{Gray}, ``Leray 1946 must be one of the first instances of the French saying that they are going to take what they have done for spaces and generalize it to mappings.''
While it was well-known that a continuous map induces a homomorphism in (co)homology, Leray's insight was going to break entirely new ground: in a conversation with A. Weil \cite{BorelAMS} he spoke of a homology with ``variable coefficients''\footnote{We know from a footnote in \cite{Leray45c2} that he already thought of this idea while in captivity.}.
It was thus the two subsequent papers by Leray \cite{Leray46a} and \cite{Leray46b} that first introduced the notions of sheaves, sheaf cohomology and spectral sequences.
The impact of these three notions on algebraic topology and homological algebra is hard to understate.


Inspired by \cite{Alexander}, the fundamental idea was to equip a module with a support function taking its values in the closed subsets of a topological space subject to some properties.
In \cite{Leray46a}, Leray defined a sheaf on a topological space $X$ by associating a module $\F(K)$ over a ring $R$ to each closed subset $K$ of $X$ and a morphism $\F(K) \to \F(K')$ of modules to each inclusion $K' \subseteq K$.
A first basic example is the $p$-th cohomology sheaf assigning $H^p(K ; R)$ to $K$.
His definition was not quite what we use today, but this was nevertheless the first time the word ``faisceau'' was used for anything resembling today's notion.
For a more detailed exposition of the original definition and how it evolved in the following years, \cite{Gray} gives a very detailed rendition of the origins of sheaf theory.


According to \cite{Gray}, in the winter of 1947 to 1948, Leray gave a course in algebraic topology, which he wrote up for the proceedings of a 1947 colloquium in Paris and published as \cite{Leray49}.
The presentation was now much clearer than in the earlier papers, and notions such as subsheaves, quotient sheaves and direct image sheaves were first described.
Perhaps more importantly, he describes the notion of a so-called complex and how to construct a sheaf from one.
He then defines certain special complexes and calls them ``couvertures'', and then he uses certain ``fine couvertures'' to define a notion of a relative cohomology ring on a topological space $X$.
Fine couvertures inspired many related, and perhaps more familiar, notions such as Cartan's ``homotopically fine'' in \cite{Cartan_50_4}, Godement's ``flasque'' (flabby) and ``soft'' sheaves in \cite{Godement58} and Grothendieck's ``injective'' in \cite{Tohoku}.
These notions were then used to construct special resolutions of sheaves consisting of sheaves that have trivial (co)homology.
Isomorphism theorems and duality theorems (such as Verdier and Poincaré duality) were then proved by reducing to showing a certain resolution was for instance, flasque or injective.

It was Cartan who in \cite{Cartan_50_4} completely reformulated the theory using open subspaces \cite{H.Miller}, and the switch to open subsets allowed people like Cartan and Serre to introduce sheaves in several complex variables, in algebraic geometry over $\mathbb{C}$ and over any algebraically closed field \cite{BorelAMS}.
Here a ``faisceau'' was now defined to be what we today would call an espace étalé.
It was the book \cite{Godement58} by functional analyst Godement that ``standardized the terminology once and for all'' \cite{Gray}.
The ``faisceau'' in \cite{Cartan_50_4} became espace étalé, a presheaf was defined simply as a contravariant functor on the category of open subsets of a topological space, and a sheaf or ``faisceau'' became a special kind of presheaf.


Leray's work was always concerned with sheaf cohomology and spectral sequences for compactly supported cohomology of locally compact topological spaces, and it is fitting that we in this chapter also only concern ourselves with sheaves on locally compact topological spaces.
If one appreciates that $1$-categories such as $\SET$ are also $\infty$-categories with the properties required in Theorem \ref{7.3.4.9}, the main theorem in this chapter says that the modern notion of a sheaf on a locally compact space using the open subsets is equivalent to a slight modification of Leray's definition using the compact subsets.

\section{Sheaves on topological spaces}
For the theory of sheaves valued in $\infty$-categories we will closely follow Lurie \cite{HTT}.
Let $\Open(X)$ denote the partially ordered set of open subsets of a topological space $X$.
A presheaf on $X$ is just a contravariant functor with source $\Open(X)$.
For a $1$-category $\C$ admitting all limits we say that a presheaf $\F$ is a sheaf if the diagram
\[
    \F(U) \rightarrow \prod_{i} \F\left(U_{i}\right) \rightrightarrows \prod_{i, j} \F\left(U_{i} \cap U_{j}\right)
\]
is an equalizer for any open cover $\{U_i\}$ of any $U \in \Open(X)$.
Grothendieck wanted a way of defining a sheaf not just on a topological space, but on ``any'' category, and he did this by endowing categories with what is now called a Grothendieck topology, and then using essentially the same definition as above.
A Grothendieck topology is a structure put on a category in the form of a set of maps called coverings.
We follow Lurie's \cite{HTT} and skip right to defining Grothendieck topologies on $\infty$-categories while noting that the definition is perfectly analogous for $1$-categories.\footnote{In fact, the $\infty$-categorical definition is equivalent whenever we are considering nerves of $1$-categories and in general a Grothendieck topology on an $\infty$-category is the same as a Grothendieck topology on its homotopy category.}
\begin{definition}[{\cite[Definition 6.2.2.1.]{HTT}}]
    Let $\C$ be an $\infty$-category.
    We define a sieve on $\C$ to be a full subcategory $\C^{(0)} \subseteq \C$ such that for any morphism $f \in \map_{\C}(X,Y)$ where $Y\in \C^{(0)}$, $X$ must also belong to $\C^{(0)}$.
    Furthermore, for an object $X \in \C$, we define a sieve on $X$ to be a sieve on $\C_{/X}$ in the above sense.
\end{definition}
\begin{definition}[{\cite[Definition 6.2.2.1.]{HTT}}]
    We define a Grothendieck topology on an $\infty$-category $\C$ as a specification of a collection of sieves called covering sieves on every object $X\in \C$.
    These collections are required to satisfy the following conditions:
    \begin{enumerate}
        \item For an object $X\in \C$, the trivial sieve $\C_{/X} \subseteq \C_{/X}$ is a covering sieve.
        \item For a morphism $f \in \map_{\C}(X,Y)$ and covering sieve $\C^{(0)}_{/Y}$ on $Y$, the pullback sieve $f^*\C^{(0)}_{/Y}$ is a covering sieve on $X$.
        \item For a covering sieve $\C^{(0)}_{/Y}$ on $Y$ and $\C^{(1)}_{/Y}$ any sieve on $Y$, if the pullback sieve $f^*\C^{(1)}_{/Y}$ is a covering sieve on $X$ for any $f\in \C^{(0)}_{/Y}$ then $\C^{(1)}_{/Y}$ is itself a covering sieve on $Y$.
    \end{enumerate}
\end{definition}
For a topological space $X$ we can equip the poset $\Open(X)$ of opens with a Grothendieck topology in which the covering sieves on $U$ are those sieves $\{U_{\alpha} \subseteq U\}$ such that $U = \bigcup_{\alpha}U_{\alpha}$.
\begin{definition}[{\cite[Definition 7.3.3.1]{HTT}}]\label{sheaf_on_top}
    Let $X \in \mathrm{Top}$ and $\C$ an $\infty$-category.
    We define a $\C$-valued sheaf on $X$ to be a presheaf $\F\colon \Open(X)^{op} \to \C$ such that for every $U\in \Open(X)$ and every covering sieve $\mathscr{W} \subseteq \Open(X)_{/U}$, the diagram
    \[
        \Nerve(\mathscr{W})^{\triangleright} \hookrightarrow \Nerve(\Open(X)_{/U})^{\triangleright} \rightarrow \Nerve(\Open(X))\xrightarrow{\F}\C^{op}
    \]
    is a colimit.
\end{definition}
\begin{remark}
    We will often utilize the fact that this is equivalent to the following limit diagram:
    \[
        \Nerve((\mathscr{W})^{op})^{\triangleleft} \hookrightarrow \Nerve((\Open(X)_{/U})^{op})^{\triangleleft} \rightarrow \Nerve(\Open(X))^{op}\xrightarrow{\F}\C
    \]
\end{remark}
Equivalently one can define sheaves as the presheaves $\F \colon \Open(X)^{op} \to \C$ such that for any open cover $\{U_{\alpha}\}$ of an open set $U \in \Open(X)$, the map
\[
    \F(U) \to \lim_V \F(V)
\]
is an equivalence in $\C$, where the limit is taken over all open subsets $V\subseteq U$ contained in some $U_{\alpha}$.
%\TODO{Mention the ``normal definitions using covers and Cech nerves and briefly discuss relation to classical definition of sheaves in a $1$-category.}
We write $\Presh(X, \C)$ for the $\infty$-category $\mathrm{Fun}(\Open(X)^{op}, \C)$ of $\C$-valued presheaves on $X$ and $\Shv(X;\C)$ for the full subcategory of $\Presh(X;\C)$ spanned by the $\C$-valued sheaves on $X$.
\section{Sheaves on locally compact spaces}
In this section we will show that for locally compact Hausdorff spaces there is an equivalence of $\infty$-categories between $\Shv(X;\C)$ and $\KShv(X;\C)$ where the latter denotes so-called $\K$-sheaves, and $\C$ is a cocomplete $\infty$-category with left exact filtered colimits.
These are sheaves defined on the collection of compact subsets instead of the opens.
From here on out we generally omit the notation for the nerve construction and assume it is clear from context that we use the nerve construction almost everywhere.
\begin{definition}
    For a locally compact Hausdorff space $X$, we write $\K(X)$ for its collection of compact subsets.
\end{definition}
\begin{definition}
    If $K, K' \subseteq X$, we write $K \Subset K'$ if there exists an open subset $U\subseteq X$ between $K$ and $K'$, i.e. $K \subseteq U \subseteq K'$.
\end{definition}
\begin{definition}
    If $K\subseteq X$ is compact, we write $\K_{K\Subset}(X)$ for the set $\{ K'\in \K(X) \mid K \Subset K' \}$ which gives a poset category $\K_{K\Subset}(X)$ ordered by $\Subset$.
\end{definition}
\begin{definition}
    A presheaf $\F\colon\K(X)^{op}\to \C$ is a $\K$-sheaf if it satisfies the following:
    \begin{enumerate}
        \item $\F(\emptyset)$ is terminal.
        \item For every pair $K,K'\in \K(X)$, the diagram
              \[\begin{tikzcd}
                      {\F(K \cup K')} && {\F(K)} \\
                      \\
                      {\F(K')} && {\F(K\cap K')}
                      \arrow[from=1-3, to=3-3]
                      \arrow[from=3-1, to=3-3]
                      \arrow[from=1-1, to=3-1]
                      \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=3-3]
                      \arrow[from=1-1, to=1-3]
                  \end{tikzcd}\]
              is a pullback in $\C$.
        \item For each $K\in \K(X)$, $\F(K)$ is a colimit of $\F|\K_{K\Subset}(X)^{op}$.
    \end{enumerate}
\end{definition}
\begin{definition}
    We denote the full subcategory of $\Presh(\K(X); \C)$ spanned by the $\K$-sheaves by $\KShv(X;\C)$.
\end{definition}
\begin{remark}
    We can use finite coverings to define a Grothendieck topology on $\K(X)$ such that condition 1. and 2. are equivalent to the sheaf condition, so in particular a $\K$-sheaf is also a member of $\Shv(\K(X); \C)$.
\end{remark}
\begin{lemma}[{\cite[][Lemma 7.3.4.8]{HTT}}]\label{7.3.4.8}
    Let $X$ be locally compact and Hausdorff, and let $\C$ be an $\infty$-category with small limits and colimits and left exact filtered colimits.
    Let $\W$ be an open cover of $X$ and denote by $\K_{\W}(X)$ the compact subsets of $X$ that are contained in some element of $\W$.
    Then any $\K$-sheaf $\F\in \KShv(X;\C)$ is a right Kan extension of $\F|_{\K_{\W}(X)^{op}}$.
\end{lemma}
\begin{proof}
    We begin by saying that an open covering $\W$ of $X$ is good if a $\K$-sheaf $\F$ is right Kan extended from the restriction to $\K_{\W}(X)^{op}$.
    Furthermore, we observe that a covering $\W$ is good if the open sets in $K$ given by $\{K \cap W \mid W \in \W\}$ form a good covering for every $K\in \K(X)$.
    This means that proving any covering of $X$ is good reduces to showing that any covering of a compact topological space $X$ is good, and hence we can assume the covering has a finite subcovering.
    \newline
    We will use induction on $n \geq 0$.
    We want to show that if $\W$ is a collection of open subsets of $X$ such that there exists $W_1, \cdots ,W_n \in \W$ with $\bigcup_{1 \leq i \leq n}W_i = X$, then $\W$ is a good covering of $X$.
    For $n=0$, we must only show $\F(\emptyset)$ is terminal, but this is given by the definition of $\F$ being a $\K$-sheaf.
    \newline
    By transitivity of Kan extensions (Proposition \ref{4.3.2.8}), if $\W \subseteq \W'$ are two coverings of $X$ such that for every $W' \in \W'$ the covering $\{ W \cap W' \mid W \in \W\}$ is a good covering of $W'$, then $\W'$ is a good covering of $X$ if and only if $\W$ also is.
    \newline
    This means that for $n>0$ it suffices to show that $\W' = \W \cup \{V\}$ is a good covering of $X$, where we have $V = \bigcup_{2 \leq i \leq n}W_i$.
    Observe now that $\W'$ contains $W_1$ and $V$ which together cover $X$ and using transitivity of Kan extensions once more further reduces the proof to $n = 2$ and showing that $\W = \{W_1, W_2\}$ is a good covering.
    \newline
    By definition of right Kan extensions along inclusions we must show that $\F(K)$ is the limit of $\F|_{\K_{\W}(X)^{op}}$ for any compact set $K \in \K(X)$.
    For a compact set $K\in \K(X)$ we define
    \[
        P = \{(K_1, K_2) \in \K(X)\times \K(X) \mid K_1 \subseteq W_1, K_2 \subseteq W_2 \text{ and } K_1 \cup K_2 = K\}
    \]
    and observe that this set is filtered as a poset ordered by inclusion in the sense of \ref{filteredposet}, so it is furthermore weakly contractible by Proposition \ref{5.3.1.20}.
    Denoting an element $\alpha = (K_1, K_2)$ in $P$, we define $\K_{\alpha}$ as the set of compacts belonging to either $K_1$ or $K_2$ and note that a set $K' \subseteq K$ belongs to $\K_{\W}(X)$ if and only if it belongs to some $\K_{\alpha}$.
    Observe also that the inclusion $(K_1 \hookleftarrow K_1 \cap K_2 \hookrightarrow K_2 ) \hookrightarrow \K_{\alpha}$ is limit-cofinal by Theorem \ref{superlemma} and hence, by $\F_{\K}$ being a $\K$-sheaf, condition 2. implies $\F(K)$ is a limit of the diagram $\F|_{\K_{\alpha}^{op}}$ for every $\alpha \in P$.
    By \cite[Corollary 4.2.3.10.]{HTT}, we can calculate the limit of $\F|_{\K_{\W}(X)^{op}}$ as a limit of limits:
    \[
        \lim_{K \in \K(X)^{op}}\F|_{\K_{\W}(X)^{op}} \simeq \lim_{\alpha \in P^{op}}\lim_{K'\in \K_{\alpha}^{op}}\F(K)\simeq \lim_{\alpha \in P^{op}}\F(K).
    \]
    Since we have already argued that $P$ is weakly contractible, the map $P \to \Delta^0$ is colimit-cofinal and we conclude that
    \[
        \lim_{\alpha \in P^{op}}\F(K) \simeq \F(K).\qedhere
    \]
    % Now, we observe that we can use the theory of cocartesian fibrations to calculate the limit from $K_{\W}(X)^{op}$ as a limit of limits.

    % \TODO{Insert reference or write about (co)cartesian fibrations.}
    % Let $p \colon E \to P$ be a cocartesian fibration associated to the functor $P \to \mathrm{Cat}_{\infty}$ which sends $\alpha \in P$ to the $\infty$-category $\K_{\alpha}$.
    % Then it is known that for a functor $\varphi\colon E \to \C$ we can calculate the colimit of $\varphi$ over $E$ as the colimit of $ p_!\varphi$ over $P$ where $p_!\varphi$ is the left Kan extension of $\varphi$ along $p$.
    % It is also known that this fibration comes with a colimit-cofinal map $E \to \K_{\W}(X)$.
    % Moreover, for a cocartesian fibration, we know the map $E_{\alpha} \to E_{/\alpha}$ is colimit-cofinal.
    % To see how we obtain this map, we identify the fiber $E_{\alpha}$ of $p$ with $\K_{\alpha}$ and consider the following diagram:
    % %https://q.uiver.app/#q=WzAsOCxbMywwLCJFIl0sWzYsMCwiXFxDIl0sWzQsMSwiXFxLX3tcXFd9KFgpIl0sWzMsMywiUCJdLFswLDMsIlxcYWxwaGEiXSxbMCwwLCJLX3tcXGFscGhhfSJdLFsxLDEsIkVfey9cXGFscGhhfSJdLFsxLDIsIlBfey9cXGFscGhhfSJdLFswLDEsIlxcdmFycGhpIl0sWzAsMl0sWzAsMywicCIsMl0sWzMsMSwicF8hXFx2YXJwaGkiLDIseyJjdXJ2ZSI6Mn1dLFsyLDFdLFs0LDMsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzUsMF0sWzUsNF0sWzUsNiwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzQsN10sWzcsM10sWzYsN10sWzYsMF0sWzYsMywiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
    % \[\begin{tikzcd}
    %         {K_{\alpha}} &&& E &&& \C \\
    %         & {E_{/\alpha}} &&& {\K_{\W}(X)} \\
    %         & {P_{/\alpha}} \\
    %         \alpha &&& P
    %         \arrow["\varphi", from=1-4, to=1-7]
    %         \arrow[from=1-4, to=2-5]
    %         \arrow["p"', from=1-4, to=4-4]
    %         \arrow["{p_!\varphi}"', curve={height=12pt}, from=4-4, to=1-7]
    %         \arrow[from=2-5, to=1-7]
    %         \arrow[hook, from=4-1, to=4-4]
    %         \arrow[from=1-1, to=1-4]
    %         \arrow[from=1-1, to=4-1]
    %         \arrow["{\exists!}",dashed, from=1-1, to=2-2]
    %         \arrow[from=4-1, to=3-2]
    %         \arrow[from=3-2, to=4-4]
    %         \arrow[from=2-2, to=3-2]
    %         \arrow[from=2-2, to=1-4]
    %         \arrow["\lrcorner"{anchor=center, pos=0.01}, draw=none, from=2-2, to=4-4]
    %     \end{tikzcd}\]
    % The map $g\colon K_{\alpha} \to E_{/\alpha}$ is now the obvious map between the two pullback squares.
    % By our definition of left Kan extensions, we calculate $p_!\varphi$ as the following colimit:
    % \[
    %     (p_!\varphi)(\alpha) = \colim\left( E_{/\alpha} \to E \xrightarrow{\varphi} \C \right)
    % \]
    % and by colimit-cofinality of $g$ we get
    % \[
    %     \colim_{\alpha \in P}p_!\varphi \simeq \colim_{\alpha \in P}\colim_{\K_{\alpha}} \F = \colim_{\alpha \in P}\F(K),
    % \]
    % but we have already argued that $P$ is weakly contractible, so the map $P \to \Delta^1$ is colimit-cofinal and we conclude that this colimit is also evaluated as $\F(K)$.
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXEtfe1xcYWxwaGF9Il0sWzEsMSwiRV97L1xcYWxwaGF9Il0sWzEsMywiUF97L1xcYWxwaGF9Il0sWzMsMywiUCJdLFszLDEsIkUiXSxbMCw0LCJcXGFscGhhIl0sWzYsMiwiXFxDIl0sWzQsMiwiXFxLX3tcXFd9KFgpIl0sWzQsMywicCJdLFsxLDRdLFsyLDNdLFsxLDJdLFs1LDNdLFs1LDJdLFswLDVdLFswLDEsIlxcZXhpc3RzISIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFsxLDMsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFswLDRdLFs0LDZdLFszLDYsInBfIVxcdmFycGhpIiwyXSxbNCw3XSxbNyw2XSxbMyw3XV0=
    % \[\begin{tikzcd}
    %         {\K_{\alpha}} \\
    %         & {E_{/\alpha}} && E \\
    %         &&&& {\K_{\W}(X)} && \C \\
    %         & {P_{/\alpha}} && P \\
    %         \alpha
    %         \arrow["p", from=2-4, to=4-4]
    %         \arrow[from=2-2, to=2-4]
    %         \arrow[from=4-2, to=4-4]
    %         \arrow[from=2-2, to=4-2]
    %         \arrow[from=5-1, to=4-4]
    %         \arrow[from=5-1, to=4-2]
    %         \arrow[from=1-1, to=5-1]
    %         \arrow["{\exists!}"', dashed, from=1-1, to=2-2]
    %         \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=4-4]
    %         \arrow[from=1-1, to=2-4]
    %         \arrow[from=2-4, to=3-7]
    %         \arrow["{p_!\varphi}"', from=4-4, to=3-7]
    %         \arrow[from=2-4, to=3-5]
    %         \arrow[from=3-5, to=3-7]
    %         \arrow[from=4-4, to=3-5]
    %     \end{tikzcd}\]

\end{proof}
\end{document}