\documentclass[../../thesis.tex]{subfiles}

\begin{document}
\section{Kan Extensions}\label{KanSection}
We will start with a detour into the world of ordinary $1$-categories.
In the  classic \cite{MacLane} Saunders MacLane says ``The notion of Kan Extensions subsumes all the other fundamental concepts of category theory''.
In the fantastic introduction to category theory \cite{CatContext} Emily Riehl devotes a whole chapter to the slogan ``All concepts are Kan extensions''.
\prepp{This intro made me cringe.}
Ubiquitous in the toolbox of any category theorist, Kan extensions are central for most everything we do in this thesis.
As we have seen, a lot of $\infty$-categorical concepts can be thought of as if we are working with ordinary $1$-categories, and we will therefore start by defining Kan extensions in ordinary categories.
\begin{definition}[{\cite[Definition 6.1.1.]{CatContext}}]
    Given functors $F$ and $K$ as in the following diagram
    \[\begin{tikzcd}
            \C && \E \\
            \\
            \D
            \arrow["F",from=1-1, to=1-3]
            \arrow[""{name=1, anchor=center, inner sep=0}, "K_{!}F"', dashed, from=3-1, to=1-3]
            \arrow["K"',from=1-1, to=3-1]
        \end{tikzcd}\]
    a left Kan extension of $F$ along $K$ is a functor $K_{!}F : \D \to \E$ together with a natural transformation $\eta: F \Rightarrow K_{!}F \circ K$ such that for any other pair $G : \D \Rightarrow \E, \gamma: F \to G \circ K$, $\gamma$ factors uniquely through $\eta$ as in the following diagram:
    \[\begin{tikzcd}
            \C && \E && \C && \E \\
            &&& {=} \\
            \D &&&& \D
            \arrow[""{name=0, anchor=center, inner sep=0}, "F", from=1-1, to=1-3]
            \arrow[""{name=1, anchor=center, inner sep=0}, "K"', from=1-1, to=3-1]
            \arrow["G"', from=3-1, to=1-3]
            \arrow[""{name=2, anchor=center, inner sep=0}, "K"', from=1-5, to=3-5]
            \arrow[""{name=3, anchor=center, inner sep=0}, "G"{description}, curve={height=12pt}, from=3-5, to=1-7]
            \arrow[""{name=4, anchor=center, inner sep=0}, "F", from=1-5, to=1-7]
            \arrow[""{name=5, anchor=center, inner sep=0}, "{K_{!}F}"{description}, curve={height=-12pt}, from=3-5, to=1-7]
            \arrow["{\exists!}"', shorten <=4pt, shorten >=4pt, Rightarrow, from=5, to=3]
            \arrow["\eta"',shorten <=7pt, shorten >=7pt, Rightarrow, from=4, to=2]
            \arrow["\gamma", shorten <=7pt, shorten >=7pt, Rightarrow, from=0, to=1]
        \end{tikzcd}\]
    Dually, a right Kan extensions of $F$ along $K$ is a functor $K_*F : \D \to \E$ with a natural transformation $\epsilon : K_*F \circ K \Rightarrow F$ such that any functor $G : \D \to E$ and any natural transformation $\delta : G \Rightarrow F$, $\delta$ factors uniquely through $\epsilon$.
    \prepp{Diagram is exactly the same but all $2$-cells go the other way.}
\end{definition}
The following result justifies the choice to denote left and right Kan extensions by lower shriek and star:
\begin{proposition}[{\cite[Proposition 6.1.5.]{CatContext}}]
    Let $K$ be a functor $\C \to \D$ and $\E$ some category.
    If the left and right Kan extensions of any functor $F$ along $K$ exists, these define left and right adjoints to the pre-composition functor $K^* : \Fun(\D, \E) \to \Fun(\C, \E)$ and by uniqueness of adjoints, any left or right adjoint to the pre-composition functor yields left or right Kan extensions.
\end{proposition}
While the description of Kan extensions as certain adjoints are useful, there's usually another description available to us that turns out to be even more useful.
Whenever $\C$ and $\D$ are respectively small and locally small potential Kan extensions along $K: \C \to \D$ are what we call pointwise Kan extensions.
More precisely, the existence of left or right Kan extensions along such functors coincides with the existence of certain colimits or limits, respectively.
For a functor $K:\C \to \D$, \cite{MacLane} denotes by $d \downarrow K$ the category $\C \times_{\C}\D_{d/}$ and we will choose to denote it by $K_{d/}$.
Likewise the category $K \downarrow d = \C \times_{\D}\D_{/d}$ will be denoted $K_{/d}$.
These categories come with projection functors $\Pi_d$ and $\Pi^d$, respectively, which send the objects $d\to Kc$ and $Kc \to d$ to the object $c \in \C$.
The following theorem gives a formula for calculating certain left and right Kan extensions as colimits and limits.
\begin{theorem}[{\cite[Theorem 6.2.1.]{CatContext}}]\label{ptwiseKan}
    Let $\D \xleftarrow{K} \C \xrightarrow{F} \E$ be functors.
    If it exists for every object $d\in D$, the following colimits defines the left Kan extension $K_!F$:
    \[
        K_!F(d) : = \colim(K_{/d} \xrightarrow{\Pi^d}\C\xrightarrow{F}\E)
    \]
    and the unit transformation $\eta: F \to K_!F\circ K$ can be extracted from the colimit cone.
    Dually, if the following limits exists for every object $d\in D$, they define the right Kan extension $K_*F$:
    \[
        K_*F(d) : = \lim(K_{d/} \xrightarrow{\Pi_d}\C \xrightarrow{F} \E)
    \]
    and the counit transformation $\epsilon: K_*F\circ K \to F$ can be extracted from the limit cone.
\end{theorem}
\prepp{Is it clear what it means to extract the 2-cells from the cones?}
\begin{proof}
    Proofs can be found in \cite[Theorem 6.2.1.]{CatContext} and \cite[Theorem X.3.1.]{MacLane}
\end{proof}
When $\D$ and $\E$ are locally small we call Kan extensions that can be caluclated by the colimit and limit formulae above for pointwise Kan extensions.
In \cite{CatContext}, Riehl says the consensus among category theorists is that the important Kan extensions are the pointwise Kan extensions and quotes \cite[§4]{Kelly}:
``Our present choice of nomenclature is based on our failure to find a single instance where a weak Kan extension plays any mathematical role whatsoever.''
This thesis is no different, and we will only care about pointwise Kan extensions from here on out.
We will see that there are analogous limit formulae for Kan extensions in $\infty$-categories which are central to most of the proofs in this thesis.
Before we extend the theory Kan extensions from ordinary categories to the world of $\infty$-categories, we will consider some important examples, but first observe that Theorem \ref{ptwiseKan} gives the following immmediate consequence:
\begin{corollary}
    If $\C$ is small and $\D$ is locally small, then for a functor $K:\C \to \D$ we have:
    \begin{enumerate}
        \item If $\E$ is cocomplete, left Kan extensions exists and are given by the colimit formula of Theorem \ref{ptwiseKan}.
        \item If $\E$ is complete, right Kan extensions exists and are given by the limit formula of Theorem \ref{ptwiseKan}.
    \end{enumerate}
\end{corollary}
\begin{example}
    $n$-truncation is given by restricting along the inclusion $ i : \Delta_{\leq n} \hookrightarrow \Delta$, and since $\SET$ is both cocomplete and complete, we have both left and right Kan extensions to $n$-truncation.
    \[\begin{tikzcd}
            {\sset} && {\sset_{\leq n}}
            \arrow[""{name=0, anchor=center, inner sep=0}, "{i^*_n}"{description}, from=1-1, to=1-3]
            \arrow[""{name=1, anchor=center, inner sep=0}, "{(i_{n})_{!}}"', curve={height=24pt}, from=1-3, to=1-1]
            \arrow[""{name=2, anchor=center, inner sep=0}, "{(i_n)_*}", curve={height=-24pt}, from=1-3, to=1-1]
            \arrow["\dashv"{anchor=center, rotate=-91}, draw=none, from=1, to=0]
            \arrow["\dashv"{anchor=center, rotate=-89}, draw=none, from=0, to=2]
        \end{tikzcd}\]
    where $\sset_{\leq n}:=\Fun(\Delta^{op}_{\leq n},\SET)$.
\end{example}
\begin{example}[Kan extension along fully faithful functors]
    Let $K : \C \to \D$ be a fully faithful functor.
    Then, up to natural isomorphism, any pointwise Kan extension along $K$ define actual on the nose extensions.
    \begin{proof}
        Observe that $\C_{/c} \simeq K_{/K(c)}$ is an equivalence of categories because $K$ is fully faithful, so we can calculate the left Kan extension $K_!F$ on objects by the colimit formula:
        \[
            K_!F(K(c)) = \colim(K_{/K(c)} \simeq \C_{/c} \xrightarrow{\Pi}\C\xrightarrow{F}\E).
        \]
        Since the identity on $c$ is terminal in $\C_{/c}$ the colimit reduces to evaluation at the terminal object $K(c)\xrightarrow{id}K(c)$ in $K_{/Kc}$, so $\eta_c : F(c) \cong K_!F(K(c))$ is an isomorphism.
        The proof for pointwise right Kan extensions is completely dual.
    \end{proof}
\end{example}
\begin{example}[Yoneda extension]
    Let $\C$ be small, $\E$ locally small and cocomplete.
    By the corollary above, any functor $F: \C \to \E$ admits a left Kan extension $y_!F$ along the Yoneda embedding $y$ and by fully faithfulness of $y$ the unit $F \cong y_!F\circ y$ is an identity natural transformation.
    In fact, $y_!F$ has a right adjoint $R$, defined on objects by
    \[
        R(e) : = \Hom_{\E}(F(\blank), e) : \C^{op} \to \SET.
    \]
    The full proof showing that this is in fact right adjoint to $y_!F$ can be found in \cite[Remark 6.5.9.]{CatContext} from which we have taken this example.
\end{example}
The process of left Kan extending along the Yoneda embedding is called Yoneda extension in \cite[pp.62-64]{CatsSheaves} and it provides lots of interesting examples of Kan extensions.
We will look at a couple examples in the special case $\C = \Delta$.
\prepp{These are exercises in \cite{CatContext}. Should I cite?}
\begin{example}
    Let $\Delta_{\mathrm{Top}} : \Delta \to \mathrm{Top}$ be the functor known as the standard topological $n$-simplex:
    \[
        [n] \mapsto \Delta^n_{\mathrm{Top}} : = \{(x_0, \dots , x_n) \in \mathbb{R}^{n+1} | \sum_{i}x_i = 1, x_i \geq 0\}  .
    \]
    By the discussion of Yoneda extension above we have an adjoint pair $(y_!\Delta_{\mathrm{Top}}, R)$ where the right adjoint is given by
    \[
        R(e) = \Hom_{\mathrm{Top}}(\Delta_{\mathrm{Top}}(\blank), e)
    \]
    and this is what is known as the total singular complex functor, also written $\mathrm{Sing}$.
    \TODO{Check if $\mathrm{Sing}$ is mentioned in chapter 1 and reference it back.}
\end{example}
\begin{example}[The Nerve construction]\label{NerveKan}
    Let $F$ be the embedding $\Delta \hookrightarrow \mathrm{Cat}$.
    Yoneda extension yields an adjoint pair $(y_!F, R)$ where the right adjoint $R$ is given by
    \[
        R(\C) = \Hom_{\mathrm{Cat}}(F(\blank), \C).
    \]
    Recall from Example \ref{NerveDef} that this is the definition of the nerve of $\C$.
    The left adjoint $y_!F$ is the homotopy category $\h$ of a simplicial set.
    Observe furthermore that the counit $\h(\Nerve(X)) \to X$ is an isomorphism which implies that the nerve construction is a fully faithful functor.
\end{example}
Yoneda extension produces even more examples of adjunctions.
In \cite[Exercise 6.5.iii.]{CatContext}, Riehl fixes a topological space $X$ and constructs the inclusion $\mathrm{Open}(X) \to \mathrm{Top}_{/X}$ by sending open subsets $U \subseteq X$ to the inclusion map $U\hookrightarrow X$.
Yoneda extension now yields an adjunction
\[\begin{tikzcd}
        {\mathrm{Top}_{/X}} && {\Fun(\Open(X)^{op},\SET)}
        \arrow[""{name=0, anchor=center, inner sep=0}, shift right=1, from=1-1, to=1-3]
        \arrow[""{name=1, anchor=center, inner sep=0}, shift right=2, from=1-3, to=1-1]
        \arrow["\dashv"{anchor=center, rotate=-90}, draw=none, from=1, to=0]
    \end{tikzcd}\]
and as Riehl writes, all adjunctions restricts to an equivalence of categories which in this case yields the equivalence between the category $\Shv(X)$ of sheaves on $X$ and the category $\mathrm{Et}(X)$ of étale spaces on $X$.\footnote{I wish I knew Yoneda extension when writing my bachelor thesis because this equivalence was so useful.}
\subsection{Kan extensions for $\infty$-categories}
\prepp{THIS IS CURRENTLY JUST ALONG INCLUSIONS}
\begin{definition}
    \TODO{This is chaos. Fix all slice notations in separate subsection of infcat chapter.}
    Let $\A$ be an $\infty$-category with a full subcategory $\A^0$ and $p:K\to \A$ a diagram.
    Following \cite[Notation 4.3.2.1]{HTT} we write $\A^0_{/p}$ for the fiber product $\A_{/p}\times_{/A}\A^0$.
    If $A\in \A$, $\A^0_{/A}$ is the full subcategory of $\A_{/A}$ spanned by the morphisms $A'\to A$ where $A'\in \A^0$.
    \newline
    Analogously $\A^0_{p/}$ denotes $\A_{p/}\times_{\A}\A^0$ and $\A^0_{A/}$ is the full subcategory spanned by morphisms $A\to A'$.
\end{definition}
\begin{definition}[{\cite[\href{https://kerodon.net/tag/02YQ}{Definition 02YQ}]{kerodon}}]\label{KanDef}
    For a functor $F: \A \to \C$ between $\infty$-categories where $\A$ has a full subcategory $\A^0$, we say $F$ is left Kan extended from $\A^{0}$ if
    \[
        (\A^{0}_{/A})^{\triangleright} \hookrightarrow (\A_{/A})^{\triangleright} \xrightarrow{c} \A \xrightarrow{F}\C
    \]
    is a colimit diagram in $\C$ for every object $A\in \A$.
    Here $c$ is the slice contraction morphism of \cite[\href{https://kerodon.net/tag/0188}{Tag 0188}]{kerodon}, i.e.
    $c|_{\A_{/A}}$ is the projection and $c|_{\Delta^0}=A$.
    Recalling the adjoint relationship between joins and slices, this is the counit of the adjunction.
    \newline
    Right Kan extensions are opposite to left Kan extensions, i.e. $F$ is right Kan extended from $\A^0$ if
    \[
        (\A^{0}_{A/})^{\triangleleft} \hookrightarrow (\A_{A/})^{\triangleleft} \xrightarrow{c'} \A \xrightarrow{F}\C
    \]
    is a limit diagram, where $c'$ is the coslice contraction morphism\TODO{Should probably write more about what coslice contraction is. Plan is full chapter on slice $\infty$-cats.}.
\end{definition}
Later on we will need the following result about Kan extensions of full subcategories.
\begin{proposition}[{\cite[Proposition 4.3.2.8]{HTT}}]\label{4.3.2.8}
    For a functor $F: \A\to\C$ of $\infty$-categories where $\A^0 \subseteq \A^1$ are full subcategories of $\A$, if $F|_{\A^1}$ is left Kan extended from $\A^0$, then $F$ is left Kan extended from $\A^1$ if and only if it is left Kan extended from $\A^0$.
\end{proposition}
\begin{remark}
    Original result is for a categorical fibration $p:\C\to \C'$ and $p$-left Kan extensions. Okay to just do this??
\end{remark}
\end{document}